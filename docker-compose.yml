version: '3.8'

# NOTE: This docker-compose.yml is DEPRECATED for v5.0+ (Docker-free architecture)
# ChromaDB (embedded) replaced Qdrant, NetworkX (in-memory) replaced Neo4j
# Only Redis remains for optional distributed caching (not required for single-user)
#
# For current setup instructions, see: docs/development/guides/DOCKER-FREE-SETUP.md
#
# This file is kept for reference and optional Redis deployment only.

services:
  # Redis - Caching Layer (OPTIONAL for v5.0+)
  redis:
    image: redis:7-alpine
    container_name: memory-mcp-redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command: redis-server --appendonly yes --maxmemory 512mb --maxmemory-policy allkeys-lru
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s
      timeout: 5s
      retries: 5
    restart: unless-stopped
    networks:
      - memory-mcp-network

volumes:
  redis_data:
    driver: local

networks:
  memory-mcp-network:
    driver: bridge
